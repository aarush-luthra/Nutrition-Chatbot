<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat | Fit Buddy - Your AI Nutrition Companion</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body class="chat-page">
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Minimal Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="back-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7" />
                </svg>
                <span>Back Home</span>
            </a>
            <a href="/" class="nav-logo">
                <div class="logo-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z" />
                    </svg>
                </div>
                <span>Fit Buddy</span>
            </a>
            <div style="width: 80px;"></div> <!-- Spacer for centering -->
        </div>
    </nav>

    <!-- Chat Wrapper -->
    <div class="chat-wrapper">
        <div class="chat-container" id="chatContainer">
            <!-- Branding Header (Hidden on full page chat or redesigned) -->
            <header class="chat-branding" style="display: none;">
                <div class="branding-icon">ü•ó</div>
                <h1 class="branding-title">Fit Buddy</h1>
            </header>

            <!-- Navigation Bar -->
            <nav class="chat-nav">
                <div class="nav-status">
                    <span class="status-dot"></span>
                    <span>Online</span>
                </div>
                <div class="nav-items">
                    <button class="nav-item" id="editProfile">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                            <circle cx="12" cy="7" r="4" />
                        </svg>
                        Edit Profile
                    </button>
                    <button class="nav-item" id="viewProgress">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="18" y1="20" x2="18" y2="10" />
                            <line x1="12" y1="20" x2="12" y2="4" />
                            <line x1="6" y1="20" x2="6" y2="14" />
                        </svg>
                        Progress
                    </button>
                    <button class="nav-item" id="resetChat">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="23,4 23,10 17,10" />
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                        </svg>
                        Reset
                    </button>
                </div>
            </nav>

            <!-- Calorie Tracker Bar -->
            <div class="calorie-tracker" id="calorieTracker">
                <div class="calorie-info">
                    <span class="calorie-icon">üî•</span>
                    <span class="calorie-label">Today:</span>
                    <span class="calorie-value"><span id="totalCalories">0</span> kcal</span>
                </div>
                <div class="calorie-progress">
                    <div class="calorie-bar">
                        <div class="calorie-bar-fill" id="calorieBarFill"></div>
                    </div>
                    <span class="calorie-goal" id="calorieGoalText">Goal: 2000</span>
                </div>
            </div>

            <!-- Food Tracker Panel -->
            <div class="food-tracker" id="foodTracker">
                <button class="food-tracker-toggle" id="foodTrackerToggle">
                    <span class="toggle-icon">üçΩÔ∏è</span>
                    <span class="toggle-text">Today's Meals</span>
                    <span class="toggle-count" id="mealCount">0</span>
                    <svg class="toggle-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9" />
                    </svg>
                </button>
                <div class="food-list" id="foodList">
                    <div class="food-empty" id="foodEmpty">
                        <span>No meals logged yet today</span>
                    </div>
                </div>
            </div>

            <!-- Messages Area -->
            <main class="messages-area" id="messagesArea"></main>

            <!-- Quick Replies -->
            <div class="quick-replies-container" id="quickRepliesContainer"></div>

            <!-- Input Area -->
            <footer class="input-area">
                <div class="input-wrapper">
                    <input type="text" class="message-input" id="messageInput" placeholder="Type your message..."
                        autocomplete="off">
                    <button class="send-btn" id="sendBtn">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M22 2L11 13" />
                            <path d="M22 2L15 22L11 13L2 9L22 2Z" />
                        </svg>
                    </button>
                </div>
            </footer>

            <!-- Profile Modal -->
            <div class="modal-overlay" id="profileModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>My Profile</h2>
                        <button class="modal-close" id="closeProfileModal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="profileForm">
                            <div class="form-group">
                                <label for="heightInput">Height (cm)</label>
                                <input type="number" id="heightInput" placeholder="e.g., 170" min="100" max="250"
                                    step="1">
                            </div>
                            <div class="form-group">
                                <label for="weightInput">Weight (kg)</label>
                                <input type="number" id="weightInput" placeholder="e.g., 65" min="30" max="300"
                                    step="0.1">
                            </div>
                            <div class="form-group">
                                <label for="goalSelect">Fitness Goal</label>
                                <select id="goalSelect">
                                    <option value="weight_loss">Weight Loss</option>
                                    <option value="weight_gain">Weight Gain</option>
                                    <option value="maintenance" selected>Maintain Weight</option>
                                    <option value="muscle_building">Build Muscle</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="calorieGoalInput">Daily Calorie Goal</label>
                                <input type="number" id="calorieGoalInput" placeholder="e.g., 2000" min="1000"
                                    max="5000" step="50">
                            </div>
                            <div class="bmi-display" id="bmiDisplay"></div>
                            <button type="submit" class="save-btn">Save Profile</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Progress Modal -->
            <div class="modal-overlay" id="progressModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Your Progress</h2>
                        <button class="modal-close" id="closeModal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="streak-display">
                            <span class="streak-icon">üî•</span>
                            <span class="streak-count" id="streakCount">0</span>
                            <span class="streak-label">Day Streak</span>
                        </div>
                        <div class="weekly-progress">
                            <h3>This Week</h3>
                            <div class="progress-bars" id="weeklyBars"></div>
                        </div>
                        <div class="weekly-calories">
                            <h3>Weekly Calories</h3>
                            <div class="calorie-history" id="calorieHistory"></div>
                        </div>
                        <p class="progress-message" id="progressMessage">Start logging meals to track your progress!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>